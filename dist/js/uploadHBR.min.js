var uploadHBR=function(){var f,i=6,o="Add",s="Click or drag a photo here",r="Click here to remove photo",d="fa fa-camera",l="fa fa-times",u=["image/jpeg","image/png"],p="base",c=0;function g(e){var a=$(e).attr("data-index");$(f+" #base64_"+a).val(""),$(f+" #new_"+a).removeClass("d-none"),$(f+" #prev_"+a).addClass("d-none"),$(f+" #prev_"+a).find("img").attr("src",""),$(e).find(".uploadArea").removeClass("selected"),$(e).removeClass("selected")}function a(e){f=e.target;var a,t,n=$(e.target);if(0<n.length)for(n.html("");c<i;c++)n.append((a=c,t=u.join(","),'<div class="box-drag column" draggable="true"><input type="hidden" name="'+p+'[]" id="base64_'+a+'" data-id="'+a+'"><div class="form-group"><div class="col-12 no-padding uploadArea" data-index="'+a+'"><span class="new" id="new_'+a+'" title="'+s+'" data-index="'+a+'"><input type="file" class="fileHidden d-none" multiple="" accept="'+t+'" id="hidden_'+a+'" data-index="'+a+'"><i class="'+d+'"></i><p>'+o+'</p></span><span class="image-preview d-none" id="prev_'+a+'"><div class="remove" title="'+r+'" data-index="'+a+'"><i class="'+l+'"></i></div><img class="img-fluid" src=""></span></div></div></div>'));else console.log("Target not found : "+e.target)}function t(){var a=null,t=document.querySelectorAll("#columns .column");function r(e,a){var t=new FileReader;t.onload=function(e){$(f+" #prev_"+a).find("img").attr("src",e.target.result),$(f+" #prev_"+a).removeClass("d-none"),$(f+" #new_"+a).addClass("d-none"),$(f+" #base64_"+a).val(e.target.result).change()},t.readAsDataURL(e)}function n(e){var s=0;$.each(e,function(i,o){$.each(u,function(e,a){if(void 0!==$(f+" #base64_"+i).val()&&a===o.type)if(0<parseInt($(f+" #base64_"+i).val().length))for(var t=0,n=s+1;n<$(f+' input[name*="'+p+'"]').length;n++)t||0!==parseInt($(f+" #base64_"+n).val().length)||(r(o,n),s=n,t++);else r(o,i)})})}function i(){$(f+" .remove").click(function(){g(this)}),$(f+" .new").click(function(){document.getElementById("hidden_"+$(this).attr("data-index")).click()}),$(f+" .fileHidden").change(function(){n(this.files)}),$(f+" .uploadArea").on("dragend",function(){$(this).removeClass("selected")}),$(f+" .uploadArea").on("dragleave",function(){$(this).removeClass("selected")}),$(f+" .uploadArea").on("dragstart",function(){$(this).addClass("selected")}),$(f+" .uploadArea").on("dragover",function(e){e.preventDefault(),e.stopPropagation(),$(this).addClass("selected")}),$(f+" .uploadArea").on("dragenter",function(e){e.preventDefault(),e.stopPropagation(),$(this).addClass("selected")}),$(f+" .uploadArea").on("drop",function(e){$(this).removeClass("selected"),e.originalEvent.dataTransfer&&e.originalEvent.dataTransfer.files.length&&(e.preventDefault(),e.stopPropagation(),n(e.originalEvent.dataTransfer.files))})}function o(e){return e.preventDefault&&e.preventDefault(),$(f+" .column").css("opacity",1),$(this).find(".uploadArea").addClass("selected"),!(e.dataTransfer.dropEffect="move")}function s(e){[].forEach.call(t,function(e){e.classList.remove("over")})}function d(e){this.classList.add("over"),e.preventDefault(),e.stopPropagation()}function l(e){this.classList.remove("over"),$(f+" .uploadArea").removeClass("selected")}function c(e){this.style.opacity="0.4",a=this,e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",this.innerHTML)}function v(e){e.stopPropagation&&e.stopPropagation(),null!==a&&a!==this&&(a.innerHTML=this.innerHTML,this.innerHTML=e.dataTransfer.getData("text/html"),$(f+" .uploadArea").removeClass("selected"),$(f+" .column").css("opacity",1)),i()}[].forEach.call(t,function(e){e.addEventListener("dragstart",c,!1),e.addEventListener("dragenter",d,!1),e.addEventListener("dragover",o,!1),e.addEventListener("dragleave",l,!1),e.addEventListener("drop",v,!1),e.addEventListener("dragend",s,!1)}),i()}return{init:function(e){Modernizr.draganddrop?(void 0!==e.max&&(i=parseInt(e.max)),void 0!==e.textNew&&(o=e.textNew),void 0!==e.textTitle&&(s=e.textTitle),void 0!==e.textTitle&&(s=e.textTitle),void 0!==e.mimes&&(u=e.mimes),void 0!==e.postName&&(p=e.postName),void 0!==e.start&&(c=e.start),a(e),t()):console.log("Modernizr not enabled")},reset:function(e){var a=$(e);0<a.length?$.each($(a).find(".uploadArea"),function(e,a){g(this)}):console.log("Target not found : "+e)}}};